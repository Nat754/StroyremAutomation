{"uid":"a11f79e830ab4bd4","name":"positive_check_discount_displayed_for_unauthorized_customer_for_amount_3500_4999rub_smoke","fullName":"tests.test_products_on_sale.test_products_on_sale_page.TestProductsOnSalePage#test_positive_check_discount_for_unauthorized_customer_for_amount_3500_4999rub_smoke","historyId":"2319df26c5c8a1c6f15c67e5b550813c","time":{"start":1707267541863,"stop":1707267550411,"duration":8548},"status":"failed","statusMessage":"AssertionError: ОР: Скидка = 61.39, ФР: скидка = 61.4\nassert 61.4 == 61.39\n +  where 61.39 = round((4093.0 * 0.015), 2)","statusTrace":"self = <tests.test_products_on_sale.test_products_on_sale_page.TestProductsOnSalePage object at 0x7f37a146f750>\nlink = 'https://test2.stroyrem-nn.ru/catalog/shlifovalnye-mashiny'\nproduct_page_open = <pages.products_on_sale_page.ProductsOnSale object at 0x7f37a0446450>\n\n    @allure.title(\"positive_check_discount_displayed_for_unauthorized_customer_for_amount_3500_4999rub_smoke\")\n    @pytest.mark.parametrize('link', [f\"{MAIN_PAGE_PROD_URL}{SHLIFOVALNYE_MASHINY_PAGE_URL}\",\n                                      f\"{MAIN_PAGE_STAGE_URL}{SHLIFOVALNYE_MASHINY_PAGE_URL}\"])\n    @pytest.mark.smoke_test\n    def test_positive_check_discount_for_unauthorized_customer_for_amount_3500_4999rub_smoke(self, link,\n                                                                                             product_page_open):\n        product_page_open.get_field_price_first().send_keys(3500)\n        product_page_open.get_field_price_last().send_keys(4999)\n        time.sleep(1)\n        product_page_open.get_in_stock_products_link().click()\n        time.sleep(2)\n        product_page_open.get_add_to_cart_btn().click()\n        price = (float(product_page_open.get_pc_price().text[:-2].replace(' ', '')))\n        product_page_open.get_header_cart_link_active().click()\n        product_page_open.get_show_modal().click()\n        product_page_open.get_name().send_keys(USER_NAME)\n        product_page_open.get_phone().send_keys(USER_PHONE)\n        product_page_open.get_email().send_keys(USER_EMAIL)\n        product_page_open.get_checkout_to_step_2().click()\n        total = (float(product_page_open.get_products_total().text[:-2].replace(' ', '')))\n        discount = (float(product_page_open.get_discount_price().text[:-2].replace(' ', '')))\n        assert total == price - round(price * 0.015, 2), \\\n            f\"ОР: Стоимость товара = {price - round(price * 0.015, 2)}, ФР: стоимость товара = {total}\"\n>       assert discount == round(price * 0.015, 2), \\\n            f\"ОР: Скидка = {round(price * 0.015, 2)}, ФР: скидка = {discount}\"\nE       AssertionError: ОР: Скидка = 61.39, ФР: скидка = 61.4\nE       assert 61.4 == 61.39\nE        +  where 61.39 = round((4093.0 * 0.015), 2)\n\ntests/test_products_on_sale/test_products_on_sale_page.py:107: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"_session_faker","time":{"start":1707266751138,"stop":1707266751210,"duration":72},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"clear_allure_results_folder","time":{"start":1707266751210,"stop":1707266751210,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"driver","time":{"start":1707267530670,"stop":1707267531467,"duration":797},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup","time":{"start":1707267531467,"stop":1707267531467,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"product_page_open","time":{"start":1707267531467,"stop":1707267541863,"duration":10396},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"status":"failed","statusMessage":"AssertionError: ОР: Скидка = 61.39, ФР: скидка = 61.4\nassert 61.4 == 61.39\n +  where 61.39 = round((4093.0 * 0.015), 2)","statusTrace":"self = <tests.test_products_on_sale.test_products_on_sale_page.TestProductsOnSalePage object at 0x7f37a146f750>\nlink = 'https://test2.stroyrem-nn.ru/catalog/shlifovalnye-mashiny'\nproduct_page_open = <pages.products_on_sale_page.ProductsOnSale object at 0x7f37a0446450>\n\n    @allure.title(\"positive_check_discount_displayed_for_unauthorized_customer_for_amount_3500_4999rub_smoke\")\n    @pytest.mark.parametrize('link', [f\"{MAIN_PAGE_PROD_URL}{SHLIFOVALNYE_MASHINY_PAGE_URL}\",\n                                      f\"{MAIN_PAGE_STAGE_URL}{SHLIFOVALNYE_MASHINY_PAGE_URL}\"])\n    @pytest.mark.smoke_test\n    def test_positive_check_discount_for_unauthorized_customer_for_amount_3500_4999rub_smoke(self, link,\n                                                                                             product_page_open):\n        product_page_open.get_field_price_first().send_keys(3500)\n        product_page_open.get_field_price_last().send_keys(4999)\n        time.sleep(1)\n        product_page_open.get_in_stock_products_link().click()\n        time.sleep(2)\n        product_page_open.get_add_to_cart_btn().click()\n        price = (float(product_page_open.get_pc_price().text[:-2].replace(' ', '')))\n        product_page_open.get_header_cart_link_active().click()\n        product_page_open.get_show_modal().click()\n        product_page_open.get_name().send_keys(USER_NAME)\n        product_page_open.get_phone().send_keys(USER_PHONE)\n        product_page_open.get_email().send_keys(USER_EMAIL)\n        product_page_open.get_checkout_to_step_2().click()\n        total = (float(product_page_open.get_products_total().text[:-2].replace(' ', '')))\n        discount = (float(product_page_open.get_discount_price().text[:-2].replace(' ', '')))\n        assert total == price - round(price * 0.015, 2), \\\n            f\"ОР: Стоимость товара = {price - round(price * 0.015, 2)}, ФР: стоимость товара = {total}\"\n>       assert discount == round(price * 0.015, 2), \\\n            f\"ОР: Скидка = {round(price * 0.015, 2)}, ФР: скидка = {discount}\"\nE       AssertionError: ОР: Скидка = 61.39, ФР: скидка = 61.4\nE       assert 61.4 == 61.39\nE        +  where 61.39 = round((4093.0 * 0.015), 2)\n\ntests/test_products_on_sale/test_products_on_sale_page.py:107: AssertionError","steps":[{"name":"Проверяем видимость поля 'ЦЕНА от'","time":{"start":1707267541863,"stop":1707267541895,"duration":32},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Проверяем видимость поля 'ЦЕНА до'","time":{"start":1707267541942,"stop":1707267541971,"duration":29},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Проверяем кликабельность кнопки 'На складе'","time":{"start":1707267543007,"stop":1707267543049,"duration":42},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Проверяем кликабельность кнопки 'В корзину'","time":{"start":1707267545081,"stop":1707267545143,"duration":62},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Проверяем видимость цены товара","time":{"start":1707267545170,"stop":1707267545201,"duration":31},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Проверяем кликабельность кнопки 'Корзина'","time":{"start":1707267545211,"stop":1707267546749,"duration":1538},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Проверяем кликабельность кнопки 'Перейти к оформлению'","time":{"start":1707267549899,"stop":1707267550048,"duration":149},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Проверяем видимость поля 'ФИО'","time":{"start":1707267550082,"stop":1707267550106,"duration":24},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Проверяем видимость поля 'Номер телефона'","time":{"start":1707267550141,"stop":1707267550166,"duration":25},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Проверяем видимость поля 'E-mail'","time":{"start":1707267550206,"stop":1707267550229,"duration":23},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Проверяем видимость кнопки 'Продолжить'","time":{"start":1707267550282,"stop":1707267550304,"duration":22},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Проверяем видимость поля 'Товары на сумму'","time":{"start":1707267550345,"stop":1707267550371,"duration":26},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Проверяем видимость значения поля 'Скидка'","time":{"start":1707267550377,"stop":1707267550402,"duration":25},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[{"uid":"370fe17f16a786bc","name":"Screenshot","source":"370fe17f16a786bc.png","type":"image/png","size":36270},{"uid":"5135e69452b15297","name":"HTML source","source":"5135e69452b15297.html","type":"text/html","size":494348}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":13,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"setup::0","time":{"start":1707267550569,"stop":1707267550569,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"driver::0","time":{"start":1707267550569,"stop":1707267550648,"duration":79},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"epic","value":"Products On SalePage"},{"name":"tag","value":"smoke_test"},{"name":"tag","value":"flaky(max_runs=3, min_passes=1)"},{"name":"parentSuite","value":"tests.test_products_on_sale"},{"name":"suite","value":"test_products_on_sale_page"},{"name":"subSuite","value":"TestProductsOnSalePage"},{"name":"host","value":"167511ff4b2b"},{"name":"thread","value":"1-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_products_on_sale.test_products_on_sale_page"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"link","value":"'https://test2.stroyrem-nn.ru/catalog/shlifovalnye-mashiny'"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":57,"broken":6,"skipped":0,"passed":127,"unknown":0,"total":190},"items":[{"uid":"d2c10ae97aba3cfb","reportUrl":"https://Nat754.github.io/StroyremAutomation/209//#testresult/d2c10ae97aba3cfb","status":"failed","statusDetails":"AssertionError: ОР: Скидка = 61.39, ФР: скидка = 61.4\nassert 61.4 == 61.39\n +  where 61.39 = round((4093.0 * 0.015), 2)","time":{"start":1707181347687,"stop":1707181357186,"duration":9499}},{"uid":"ab4e81b5d9d73ec3","reportUrl":"https://Nat754.github.io/StroyremAutomation/208//#testresult/ab4e81b5d9d73ec3","status":"failed","statusDetails":"AssertionError: ОР: Скидка = 61.39, ФР: скидка = 61.4\nassert 61.4 == 61.39\n +  where 61.39 = round((4093.0 * 0.015), 2)","time":{"start":1707094980727,"stop":1707094988832,"duration":8105}},{"uid":"ee6dc6fd414e9ef7","reportUrl":"https://Nat754.github.io/StroyremAutomation/207//#testresult/ee6dc6fd414e9ef7","status":"failed","statusDetails":"AssertionError: ОР: Скидка = 61.39, ФР: скидка = 61.4\nassert 61.4 == 61.39\n +  where 61.39 = round((4093.0 * 0.015), 2)","time":{"start":1707008711918,"stop":1707008720181,"duration":8263}},{"uid":"df126a7d63d7a359","reportUrl":"https://Nat754.github.io/StroyremAutomation/206//#testresult/df126a7d63d7a359","status":"failed","statusDetails":"AssertionError: ОР: Скидка = 61.39, ФР: скидка = 61.4\nassert 61.4 == 61.39\n +  where 61.39 = round((4093.0 * 0.015), 2)","time":{"start":1706922170876,"stop":1706922180131,"duration":9255}},{"uid":"fc00bf8386a679b2","reportUrl":"https://Nat754.github.io/StroyremAutomation/205//#testresult/fc00bf8386a679b2","status":"failed","statusDetails":"AssertionError: ОР: Скидка = 61.39, ФР: скидка = 61.4\nassert 61.4 == 61.39\n +  where 61.39 = round((4093.0 * 0.015), 2)","time":{"start":1706835666175,"stop":1706835674471,"duration":8296}},{"uid":"c471fbbc487fef4b","reportUrl":"https://Nat754.github.io/StroyremAutomation/204//#testresult/c471fbbc487fef4b","status":"failed","statusDetails":"AssertionError: ОР: Скидка = 61.39, ФР: скидка = 61.4\nassert 61.4 == 61.39\n +  where 61.39 = round((4093.0 * 0.015), 2)","time":{"start":1706749607872,"stop":1706749617485,"duration":9613}},{"uid":"11dd869fe25809fe","reportUrl":"https://Nat754.github.io/StroyremAutomation/203//#testresult/11dd869fe25809fe","status":"failed","statusDetails":"AssertionError: ОР: Скидка = 61.39, ФР: скидка = 61.4\nassert 61.4 == 61.39\n +  where 61.39 = round((4093.0 * 0.015), 2)","time":{"start":1706662913540,"stop":1706662922167,"duration":8627}},{"uid":"dd5f8e80587e912c","reportUrl":"https://Nat754.github.io/StroyremAutomation/202//#testresult/dd5f8e80587e912c","status":"failed","statusDetails":"AssertionError: ОР: Скидка = 61.39, ФР: скидка = 61.4\nassert 61.4 == 61.39\n +  where 61.39 = round((4093.0 * 0.015), 2)","time":{"start":1706576407322,"stop":1706576415798,"duration":8476}},{"uid":"c6ac280bfb0bac21","reportUrl":"https://Nat754.github.io/StroyremAutomation/201//#testresult/c6ac280bfb0bac21","status":"failed","statusDetails":"AssertionError: ОР: Скидка = 61.39, ФР: скидка = 61.4\nassert 61.4 == 61.39\n +  where 61.39 = round((4093.0 * 0.015), 2)","time":{"start":1706490240490,"stop":1706490249928,"duration":9438}},{"uid":"91933e2053291f87","reportUrl":"https://Nat754.github.io/StroyremAutomation/200//#testresult/91933e2053291f87","status":"failed","statusDetails":"AssertionError: ОР: Скидка = 61.39, ФР: скидка = 61.4\nassert 61.4 == 61.39\n +  where 61.39 = round((4093.0 * 0.015), 2)","time":{"start":1706404032876,"stop":1706404042512,"duration":9636}},{"uid":"6a457a65d42dba2d","reportUrl":"https://Nat754.github.io/StroyremAutomation/199//#testresult/6a457a65d42dba2d","status":"failed","statusDetails":"AssertionError: ОР: Скидка = 61.39, ФР: скидка = 61.4\nassert 61.4 == 61.39\n +  where 61.39 = round((4093.0 * 0.015), 2)","time":{"start":1706317172706,"stop":1706317181058,"duration":8352}},{"uid":"3d324501d6ad8571","reportUrl":"https://Nat754.github.io/StroyremAutomation/198//#testresult/3d324501d6ad8571","status":"failed","statusDetails":"AssertionError: ОР: Скидка = 61.39, ФР: скидка = 61.4\nassert 61.4 == 61.39\n +  where 61.39 = round((4093.0 * 0.015), 2)","time":{"start":1706230912773,"stop":1706230921406,"duration":8633}},{"uid":"f2398edf800e8c52","reportUrl":"https://Nat754.github.io/StroyremAutomation/197//#testresult/f2398edf800e8c52","status":"failed","statusDetails":"AssertionError: ОР: Скидка = 61.39, ФР: скидка = 61.4\nassert 61.4 == 61.39\n +  where 61.39 = round((4093.0 * 0.015), 2)","time":{"start":1706148438076,"stop":1706148447797,"duration":9721}},{"uid":"c1fff064ad1b4914","reportUrl":"https://Nat754.github.io/StroyremAutomation/196//#testresult/c1fff064ad1b4914","status":"failed","statusDetails":"AssertionError: ОР: Скидка = 61.39, ФР: скидка = 61.4\nassert 61.4 == 61.39\n +  where 61.39 = round((4093.0 * 0.015), 2)","time":{"start":1706058562815,"stop":1706058572105,"duration":9290}},{"uid":"313a0d199b3c547","reportUrl":"https://Nat754.github.io/StroyremAutomation/195//#testresult/313a0d199b3c547","status":"failed","statusDetails":"AssertionError: ОР: Скидка = 61.39, ФР: скидка = 61.4\nassert 61.4 == 61.39\n +  where 61.39 = round((4093.0 * 0.015), 2)","time":{"start":1705975461933,"stop":1705975470266,"duration":8333}},{"uid":"612bb371a36197f7","reportUrl":"https://Nat754.github.io/StroyremAutomation/194//#testresult/612bb371a36197f7","status":"failed","statusDetails":"AssertionError: ОР: Скидка = 61.39, ФР: скидка = 61.4\nassert 61.4 == 61.39\n +  where 61.39 = round((4093.0 * 0.015), 2)","time":{"start":1705889255211,"stop":1705889263197,"duration":7986}},{"uid":"3111ce84d7624dfd","reportUrl":"https://Nat754.github.io/StroyremAutomation/193//#testresult/3111ce84d7624dfd","status":"failed","statusDetails":"AssertionError: ОР: Скидка = 61.39, ФР: скидка = 61.4\nassert 61.4 == 61.39\n +  where 61.39 = round((4093.0 * 0.015), 2)","time":{"start":1705802891909,"stop":1705802901132,"duration":9223}},{"uid":"c64aef04d48f27ce","reportUrl":"https://Nat754.github.io/StroyremAutomation/192//#testresult/c64aef04d48f27ce","status":"failed","statusDetails":"AssertionError: ОР: Скидка = 61.39, ФР: скидка = 61.4\nassert 61.4 == 61.39\n +  where 61.39 = round((4093.0 * 0.015), 2)","time":{"start":1705716151582,"stop":1705716159934,"duration":8352}},{"uid":"5210b18c2df2069d","reportUrl":"https://Nat754.github.io/StroyremAutomation/191//#testresult/5210b18c2df2069d","status":"failed","statusDetails":"AssertionError: ОР: Скидка = 61.39, ФР: скидка = 61.4\nassert 61.4 == 61.39\n +  where 61.39 = round((4093.0 * 0.015), 2)","time":{"start":1705629797551,"stop":1705629805828,"duration":8277}},{"uid":"76e2282e67bb0ec7","reportUrl":"https://Nat754.github.io/StroyremAutomation/190//#testresult/76e2282e67bb0ec7","status":"failed","statusDetails":"AssertionError: ОР: Скидка = 61.39, ФР: скидка = 61.4\nassert 61.4 == 61.39\n +  where 61.39 = round((4093.0 * 0.015), 2)","time":{"start":1705543497172,"stop":1705543506516,"duration":9344}}]},"tags":["smoke_test","flaky(max_runs=3, min_passes=1)"]},"source":"a11f79e830ab4bd4.json","parameterValues":["'https://test2.stroyrem-nn.ru/catalog/shlifovalnye-mashiny'"]}