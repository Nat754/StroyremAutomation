{"uid":"a0b0bb5e3d4e745b","name":"positive_check_discount_displayed_for_unauthorized_customer_for_amount_3500_4999rub_smoke","fullName":"tests.test_products_on_sale.test_products_on_sale_page.TestProductsOnSalePage#test_positive_check_discount_for_unauthorized_customer_for_amount_3500_4999rub_smoke","historyId":"5ec2250188f66239d7a557e2f16d23d1","time":{"start":1707872612125,"stop":1707872621181,"duration":9056},"status":"failed","statusMessage":"AssertionError: ОР: Скидка = 66.61, ФР: скидка = 66.62\nassert 66.62 == 66.61\n +  where 66.61 = round((4441.0 * 0.015), 2)","statusTrace":"self = <tests.test_products_on_sale.test_products_on_sale_page.TestProductsOnSalePage object at 0x7fd837ee6450>\nlink = 'https://stroyrem-nn.ru/catalog/shlifovalnye-mashiny'\nproduct_page_open = <pages.products_on_sale_page.ProductsOnSale object at 0x7fd8384fe250>\n\n    @allure.title(\"positive_check_discount_displayed_for_unauthorized_customer_for_amount_3500_4999rub_smoke\")\n    @pytest.mark.parametrize('link', [f\"{MAIN_PAGE_PROD_URL}{SHLIFOVALNYE_MASHINY_PAGE_URL}\",\n                                      f\"{MAIN_PAGE_STAGE_URL}{SHLIFOVALNYE_MASHINY_PAGE_URL}\"])\n    @pytest.mark.smoke_test\n    def test_positive_check_discount_for_unauthorized_customer_for_amount_3500_4999rub_smoke(self, link,\n                                                                                             product_page_open):\n        product_page_open.get_field_price_first().send_keys(3500)\n        product_page_open.get_field_price_last().send_keys(4999)\n        time.sleep(1)\n        product_page_open.get_in_stock_products_link().click()\n        time.sleep(2)\n        product_page_open.get_add_to_cart_btn().click()\n        price = (float(product_page_open.get_pc_price().text[:-2].replace(' ', '')))\n        product_page_open.get_header_cart_link_active().click()\n        product_page_open.get_show_modal().click()\n        product_page_open.get_name().send_keys(USER_NAME)\n        product_page_open.get_phone().send_keys(USER_PHONE)\n        product_page_open.get_email().send_keys(USER_EMAIL)\n        product_page_open.get_checkout_to_step_2().click()\n        total = (float(product_page_open.get_products_total().text[:-2].replace(' ', '')))\n        discount = (float(product_page_open.get_discount_price().text[:-2].replace(' ', '')))\n        assert total == price - round(price * 0.015, 2), \\\n            f\"ОР: Стоимость товара = {price - round(price * 0.015, 2)}, ФР: стоимость товара = {total}\"\n>       assert discount == round(price * 0.015, 2), \\\n            f\"ОР: Скидка = {round(price * 0.015, 2)}, ФР: скидка = {discount}\"\nE       AssertionError: ОР: Скидка = 66.61, ФР: скидка = 66.62\nE       assert 66.62 == 66.61\nE        +  where 66.61 = round((4441.0 * 0.015), 2)\n\ntests/test_products_on_sale/test_products_on_sale_page.py:107: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"_session_faker","time":{"start":1707871722694,"stop":1707871722761,"duration":67},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"clear_allure_results_folder","time":{"start":1707871722761,"stop":1707871722762,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"driver","time":{"start":1707872601908,"stop":1707872602678,"duration":770},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"product_page_open","time":{"start":1707872602679,"stop":1707872612125,"duration":9446},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup","time":{"start":1707872602679,"stop":1707872602679,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"status":"failed","statusMessage":"AssertionError: ОР: Скидка = 66.61, ФР: скидка = 66.62\nassert 66.62 == 66.61\n +  where 66.61 = round((4441.0 * 0.015), 2)","statusTrace":"self = <tests.test_products_on_sale.test_products_on_sale_page.TestProductsOnSalePage object at 0x7fd837ee6450>\nlink = 'https://stroyrem-nn.ru/catalog/shlifovalnye-mashiny'\nproduct_page_open = <pages.products_on_sale_page.ProductsOnSale object at 0x7fd8384fe250>\n\n    @allure.title(\"positive_check_discount_displayed_for_unauthorized_customer_for_amount_3500_4999rub_smoke\")\n    @pytest.mark.parametrize('link', [f\"{MAIN_PAGE_PROD_URL}{SHLIFOVALNYE_MASHINY_PAGE_URL}\",\n                                      f\"{MAIN_PAGE_STAGE_URL}{SHLIFOVALNYE_MASHINY_PAGE_URL}\"])\n    @pytest.mark.smoke_test\n    def test_positive_check_discount_for_unauthorized_customer_for_amount_3500_4999rub_smoke(self, link,\n                                                                                             product_page_open):\n        product_page_open.get_field_price_first().send_keys(3500)\n        product_page_open.get_field_price_last().send_keys(4999)\n        time.sleep(1)\n        product_page_open.get_in_stock_products_link().click()\n        time.sleep(2)\n        product_page_open.get_add_to_cart_btn().click()\n        price = (float(product_page_open.get_pc_price().text[:-2].replace(' ', '')))\n        product_page_open.get_header_cart_link_active().click()\n        product_page_open.get_show_modal().click()\n        product_page_open.get_name().send_keys(USER_NAME)\n        product_page_open.get_phone().send_keys(USER_PHONE)\n        product_page_open.get_email().send_keys(USER_EMAIL)\n        product_page_open.get_checkout_to_step_2().click()\n        total = (float(product_page_open.get_products_total().text[:-2].replace(' ', '')))\n        discount = (float(product_page_open.get_discount_price().text[:-2].replace(' ', '')))\n        assert total == price - round(price * 0.015, 2), \\\n            f\"ОР: Стоимость товара = {price - round(price * 0.015, 2)}, ФР: стоимость товара = {total}\"\n>       assert discount == round(price * 0.015, 2), \\\n            f\"ОР: Скидка = {round(price * 0.015, 2)}, ФР: скидка = {discount}\"\nE       AssertionError: ОР: Скидка = 66.61, ФР: скидка = 66.62\nE       assert 66.62 == 66.61\nE        +  where 66.61 = round((4441.0 * 0.015), 2)\n\ntests/test_products_on_sale/test_products_on_sale_page.py:107: AssertionError","steps":[{"name":"Проверяем видимость поля 'ЦЕНА от'","time":{"start":1707872612125,"stop":1707872612166,"duration":41},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Проверяем видимость поля 'ЦЕНА до'","time":{"start":1707872612228,"stop":1707872612256,"duration":28},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Проверяем кликабельность кнопки 'На складе'","time":{"start":1707872613292,"stop":1707872613331,"duration":39},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Проверяем кликабельность кнопки 'В корзину'","time":{"start":1707872615364,"stop":1707872615413,"duration":49},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Проверяем видимость цены товара","time":{"start":1707872615443,"stop":1707872615475,"duration":32},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Проверяем кликабельность кнопки 'Корзина'","time":{"start":1707872615486,"stop":1707872617023,"duration":1537},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Проверяем кликабельность кнопки 'Перейти к оформлению'","time":{"start":1707872620676,"stop":1707872620824,"duration":148},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Проверяем видимость поля 'ФИО'","time":{"start":1707872620858,"stop":1707872620881,"duration":23},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Проверяем видимость поля 'Номер телефона'","time":{"start":1707872620919,"stop":1707872620941,"duration":22},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Проверяем видимость поля 'E-mail'","time":{"start":1707872620982,"stop":1707872621004,"duration":22},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Проверяем видимость кнопки 'Продолжить'","time":{"start":1707872621053,"stop":1707872621077,"duration":24},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Проверяем видимость поля 'Товары на сумму'","time":{"start":1707872621117,"stop":1707872621142,"duration":25},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Проверяем видимость значения поля 'Скидка'","time":{"start":1707872621148,"stop":1707872621175,"duration":27},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[{"uid":"4409f5586f1a0325","name":"Screenshot","source":"4409f5586f1a0325.png","type":"image/png","size":35660},{"uid":"45c5b8586c61e42e","name":"HTML source","source":"45c5b8586c61e42e.html","type":"text/html","size":502760}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":13,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"driver::0","time":{"start":1707872621322,"stop":1707872621396,"duration":74},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup::0","time":{"start":1707872621322,"stop":1707872621322,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"epic","value":"Products On SalePage"},{"name":"tag","value":"smoke_test"},{"name":"tag","value":"flaky(max_runs=3, min_passes=1)"},{"name":"parentSuite","value":"tests.test_products_on_sale"},{"name":"suite","value":"test_products_on_sale_page"},{"name":"subSuite","value":"TestProductsOnSalePage"},{"name":"host","value":"af84638227ac"},{"name":"thread","value":"1-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_products_on_sale.test_products_on_sale_page"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"link","value":"'https://stroyrem-nn.ru/catalog/shlifovalnye-mashiny'"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":15,"broken":5,"skipped":0,"passed":177,"unknown":0,"total":197},"items":[{"uid":"5e24bef78da5f318","reportUrl":"https://Nat754.github.io/StroyremAutomation/216//#testresult/5e24bef78da5f318","status":"failed","statusDetails":"AssertionError: ОР: Скидка = 66.61, ФР: скидка = 66.62\nassert 66.62 == 66.61\n +  where 66.61 = round((4441.0 * 0.015), 2)","time":{"start":1707786288680,"stop":1707786299042,"duration":10362}},{"uid":"89ff33f4f6a42a3f","reportUrl":"https://Nat754.github.io/StroyremAutomation/215//#testresult/89ff33f4f6a42a3f","status":"passed","time":{"start":1707699628369,"stop":1707699636637,"duration":8268}},{"uid":"9b8b0f482354a501","reportUrl":"https://Nat754.github.io/StroyremAutomation/214//#testresult/9b8b0f482354a501","status":"passed","time":{"start":1707613516297,"stop":1707613525031,"duration":8734}},{"uid":"296a8f21eff6aeab","reportUrl":"https://Nat754.github.io/StroyremAutomation/213//#testresult/296a8f21eff6aeab","status":"passed","time":{"start":1707526827722,"stop":1707526836916,"duration":9194}},{"uid":"ddb3efaabe7f6b08","reportUrl":"https://Nat754.github.io/StroyremAutomation/212//#testresult/ddb3efaabe7f6b08","status":"passed","time":{"start":1707440362548,"stop":1707440371284,"duration":8736}},{"uid":"ad17f519adb36902","reportUrl":"https://Nat754.github.io/StroyremAutomation/211//#testresult/ad17f519adb36902","status":"passed","time":{"start":1707353978884,"stop":1707353987584,"duration":8700}},{"uid":"eb5c763f45ba4b83","reportUrl":"https://Nat754.github.io/StroyremAutomation/210//#testresult/eb5c763f45ba4b83","status":"passed","time":{"start":1707267522180,"stop":1707267530595,"duration":8415}},{"uid":"73b580305fa9b290","reportUrl":"https://Nat754.github.io/StroyremAutomation/209//#testresult/73b580305fa9b290","status":"passed","time":{"start":1707181324140,"stop":1707181333762,"duration":9622}},{"uid":"ebc12072146312","reportUrl":"https://Nat754.github.io/StroyremAutomation/208//#testresult/ebc12072146312","status":"passed","time":{"start":1707094962672,"stop":1707094970821,"duration":8149}},{"uid":"79bbf64f350a53a8","reportUrl":"https://Nat754.github.io/StroyremAutomation/207//#testresult/79bbf64f350a53a8","status":"passed","time":{"start":1707008692706,"stop":1707008700990,"duration":8284}},{"uid":"e5ddb5a879190d22","reportUrl":"https://Nat754.github.io/StroyremAutomation/206//#testresult/e5ddb5a879190d22","status":"passed","time":{"start":1706922147005,"stop":1706922156150,"duration":9145}},{"uid":"f192684d14a7a0b1","reportUrl":"https://Nat754.github.io/StroyremAutomation/205//#testresult/f192684d14a7a0b1","status":"passed","time":{"start":1706835647112,"stop":1706835655532,"duration":8420}},{"uid":"e311138e5f6b339b","reportUrl":"https://Nat754.github.io/StroyremAutomation/204//#testresult/e311138e5f6b339b","status":"passed","time":{"start":1706749582738,"stop":1706749592628,"duration":9890}},{"uid":"bb63fd5f599e263e","reportUrl":"https://Nat754.github.io/StroyremAutomation/203//#testresult/bb63fd5f599e263e","status":"passed","time":{"start":1706662893023,"stop":1706662901638,"duration":8615}},{"uid":"65202d8b4e3061b6","reportUrl":"https://Nat754.github.io/StroyremAutomation/202//#testresult/65202d8b4e3061b6","status":"passed","time":{"start":1706576388708,"stop":1706576397153,"duration":8445}},{"uid":"a97ab326229465ba","reportUrl":"https://Nat754.github.io/StroyremAutomation/201//#testresult/a97ab326229465ba","status":"passed","time":{"start":1706490216331,"stop":1706490225623,"duration":9292}},{"uid":"427efc967f758a55","reportUrl":"https://Nat754.github.io/StroyremAutomation/200//#testresult/427efc967f758a55","status":"passed","time":{"start":1706404008199,"stop":1706404018017,"duration":9818}},{"uid":"db297c5c612ea4e5","reportUrl":"https://Nat754.github.io/StroyremAutomation/199//#testresult/db297c5c612ea4e5","status":"passed","time":{"start":1706317154702,"stop":1706317163019,"duration":8317}},{"uid":"c66c07e8ca52877b","reportUrl":"https://Nat754.github.io/StroyremAutomation/198//#testresult/c66c07e8ca52877b","status":"passed","time":{"start":1706230892113,"stop":1706230901412,"duration":9299}},{"uid":"c1ef06c5ff501824","reportUrl":"https://Nat754.github.io/StroyremAutomation/197//#testresult/c1ef06c5ff501824","status":"passed","time":{"start":1706148413602,"stop":1706148423169,"duration":9567}}]},"tags":["smoke_test","flaky(max_runs=3, min_passes=1)"]},"source":"a0b0bb5e3d4e745b.json","parameterValues":["'https://stroyrem-nn.ru/catalog/shlifovalnye-mashiny'"]}