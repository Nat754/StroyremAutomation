{"uid":"89c4d47e832c25d0","name":"Авторизация с помощью аккаунта OK.ru","fullName":"tests.test_sign_in.test_sign_in_page.TestSignInPage#test_positive_authorization_first_time_using_OK_smoke","historyId":"3273fef023a780529beca6cb62c64840","time":{"start":1696381863923,"stop":1696381882457,"duration":18534},"status":"skipped","statusMessage":"XFAIL хранение логинов/паролей не реализовано\n\nselenium.common.exceptions.TimeoutException: Message:","statusTrace":"self = <tests.test_sign_in.test_sign_in_page.TestSignInPage object at 0x7f16335c9c90>\ndriver = <selenium.webdriver.chrome.webdriver.WebDriver (session=\"e8fcf2fa0e8d154ae238ace65d7b52d2\")>\nsign_in_page = <pages.sign_in_page.SignInPage object at 0x7f163266e750>\nopen_sign_in_window = None\n\n    @allure.title(\"Авторизация с помощью аккаунта OK.ru\")\n    @pytest.mark.xfail(reason=\"хранение логинов/паролей не реализовано\")\n    @pytest.mark.smoke_test\n    def test_positive_authorization_first_time_using_OK_smoke(self, driver, sign_in_page, open_sign_in_window):\n        sign_in_page.get_ok_ru_auth_icon().click()\n        driver.switch_to.window(driver.window_handles[1])\n        driver.add_cookie({'name': 'bci',\n                           'value': '232693873704985418',\n                           'domain': '.ok.ru',\n                           'httpOnly': True,\n                           'path': '/',\n                           'expiry': 1726518377,\n                           'secure': True})\n        driver.add_cookie({'name': '_statid',\n                           'value': '2ee9fe98-ab2c-4d1f-9c04-30b8090d3f61',\n                           'domain': '.ok.ru',\n                           'httpOnly': True,\n                           'path': '/',\n                           'expiry': 1726518377,\n                           'secure': True})\n        driver.add_cookie({'name': 'landref',\n                           'value': 'stroyrem-nn.ru',\n                           'domain': '.ok.ru',\n                           'httpOnly': False,\n                           'path': '/',\n                           'expiry': 1726518377,\n                           'secure': True})\n        driver.add_cookie({'name': '__last_online',\n                           'value': '1691958637776',\n                           'domain': 'connect.ok.ru',\n                           'httpOnly': False,\n                           'path': '/',\n                           'expiry': 1726518638,\n                           'secure': True})\n        sign_in_page.get_ok_ru_window_email_field().send_keys(credentials['ok.ru_email'])\n        sign_in_page.get_ok_ru_window_password_field().send_keys(credentials['ok.ru_password'])\n        sign_in_page.get_ok_ru_window_submit_button().click()\n        # на новых аккаунтах нужно еще кликнуть акцепт\n        # self.driver.find_element(*self._ok_ru_window_accept_button).click()\n        driver.switch_to.window(driver.window_handles[0])\n>       sign_in_page.check_number_of_windows_to_be_equal(1)\n\ntests/test_sign_in/test_sign_in_page.py:102: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nbase/seleniumbase.py:103: in check_number_of_windows_to_be_equal\n    return self.__wait.until(EC.number_of_windows_to_be(number))\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <selenium.webdriver.support.wait.WebDriverWait (session=\"e8fcf2fa0e8d154ae238ace65d7b52d2\")>\nmethod = <function number_of_windows_to_be.<locals>._predicate at 0x7f1633d694e0>\nmessage = ''\n\n    def until(self, method, message: str = \"\"):\n        \"\"\"Calls the method provided with the driver as an argument until the \\\n        return value does not evaluate to ``False``.\n    \n        :param method: callable(WebDriver)\n        :param message: optional message for :exc:`TimeoutException`\n        :returns: the result of the last call to `method`\n        :raises: :exc:`selenium.common.exceptions.TimeoutException` if timeout occurs\n        \"\"\"\n        screen = None\n        stacktrace = None\n    \n        end_time = time.monotonic() + self._timeout\n        while True:\n            try:\n                value = method(self._driver)\n                if value:\n                    return value\n            except self._ignored_exceptions as exc:\n                screen = getattr(exc, \"screen\", None)\n                stacktrace = getattr(exc, \"stacktrace\", None)\n            time.sleep(self._poll)\n            if time.monotonic() > end_time:\n                break\n>       raise TimeoutException(message, screen, stacktrace)\nE       selenium.common.exceptions.TimeoutException: Message:\n\n/usr/local/lib/python3.11/site-packages/selenium/webdriver/support/wait.py:95: TimeoutException","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"_session_faker","time":{"start":1696380501434,"stop":1696380501517,"duration":83},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"clear_allure_results_folder","time":{"start":1696380501517,"stop":1696380501517,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"driver","time":{"start":1696381855829,"stop":1696381856649,"duration":820},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"setup","time":{"start":1696381856649,"stop":1696381856649,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"sign_in_page","time":{"start":1696381856649,"stop":1696381863560,"duration":6911},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"open_sign_in_window","time":{"start":1696381863561,"stop":1696381863922,"duration":361},"status":"passed","steps":[{"name":"Нахождение элемента: иконка профиля в хедере","time":{"start":1696381863561,"stop":1696381863574,"duration":13},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true}],"testStage":{"status":"skipped","statusMessage":"XFAIL хранение логинов/паролей не реализовано\n\nselenium.common.exceptions.TimeoutException: Message:","statusTrace":"self = <tests.test_sign_in.test_sign_in_page.TestSignInPage object at 0x7f16335c9c90>\ndriver = <selenium.webdriver.chrome.webdriver.WebDriver (session=\"e8fcf2fa0e8d154ae238ace65d7b52d2\")>\nsign_in_page = <pages.sign_in_page.SignInPage object at 0x7f163266e750>\nopen_sign_in_window = None\n\n    @allure.title(\"Авторизация с помощью аккаунта OK.ru\")\n    @pytest.mark.xfail(reason=\"хранение логинов/паролей не реализовано\")\n    @pytest.mark.smoke_test\n    def test_positive_authorization_first_time_using_OK_smoke(self, driver, sign_in_page, open_sign_in_window):\n        sign_in_page.get_ok_ru_auth_icon().click()\n        driver.switch_to.window(driver.window_handles[1])\n        driver.add_cookie({'name': 'bci',\n                           'value': '232693873704985418',\n                           'domain': '.ok.ru',\n                           'httpOnly': True,\n                           'path': '/',\n                           'expiry': 1726518377,\n                           'secure': True})\n        driver.add_cookie({'name': '_statid',\n                           'value': '2ee9fe98-ab2c-4d1f-9c04-30b8090d3f61',\n                           'domain': '.ok.ru',\n                           'httpOnly': True,\n                           'path': '/',\n                           'expiry': 1726518377,\n                           'secure': True})\n        driver.add_cookie({'name': 'landref',\n                           'value': 'stroyrem-nn.ru',\n                           'domain': '.ok.ru',\n                           'httpOnly': False,\n                           'path': '/',\n                           'expiry': 1726518377,\n                           'secure': True})\n        driver.add_cookie({'name': '__last_online',\n                           'value': '1691958637776',\n                           'domain': 'connect.ok.ru',\n                           'httpOnly': False,\n                           'path': '/',\n                           'expiry': 1726518638,\n                           'secure': True})\n        sign_in_page.get_ok_ru_window_email_field().send_keys(credentials['ok.ru_email'])\n        sign_in_page.get_ok_ru_window_password_field().send_keys(credentials['ok.ru_password'])\n        sign_in_page.get_ok_ru_window_submit_button().click()\n        # на новых аккаунтах нужно еще кликнуть акцепт\n        # self.driver.find_element(*self._ok_ru_window_accept_button).click()\n        driver.switch_to.window(driver.window_handles[0])\n>       sign_in_page.check_number_of_windows_to_be_equal(1)\n\ntests/test_sign_in/test_sign_in_page.py:102: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nbase/seleniumbase.py:103: in check_number_of_windows_to_be_equal\n    return self.__wait.until(EC.number_of_windows_to_be(number))\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <selenium.webdriver.support.wait.WebDriverWait (session=\"e8fcf2fa0e8d154ae238ace65d7b52d2\")>\nmethod = <function number_of_windows_to_be.<locals>._predicate at 0x7f1633d694e0>\nmessage = ''\n\n    def until(self, method, message: str = \"\"):\n        \"\"\"Calls the method provided with the driver as an argument until the \\\n        return value does not evaluate to ``False``.\n    \n        :param method: callable(WebDriver)\n        :param message: optional message for :exc:`TimeoutException`\n        :returns: the result of the last call to `method`\n        :raises: :exc:`selenium.common.exceptions.TimeoutException` if timeout occurs\n        \"\"\"\n        screen = None\n        stacktrace = None\n    \n        end_time = time.monotonic() + self._timeout\n        while True:\n            try:\n                value = method(self._driver)\n                if value:\n                    return value\n            except self._ignored_exceptions as exc:\n                screen = getattr(exc, \"screen\", None)\n                stacktrace = getattr(exc, \"stacktrace\", None)\n            time.sleep(self._poll)\n            if time.monotonic() > end_time:\n                break\n>       raise TimeoutException(message, screen, stacktrace)\nE       selenium.common.exceptions.TimeoutException: Message:\n\n/usr/local/lib/python3.11/site-packages/selenium/webdriver/support/wait.py:95: TimeoutException","steps":[{"name":"Нахождение элемента: иконка 'OK.ru' окна авторизации","time":{"start":1696381863923,"stop":1696381863938,"duration":15},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"Нахождение элемента: поле 'Email' окна авторизации через 'OK.ru'","time":{"start":1696381867081,"stop":1696381867094,"duration":13},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"Нахождение элемента: поле 'Пароль' окна авторизации через 'OK.ru'","time":{"start":1696381867141,"stop":1696381867153,"duration":12},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"Нахождение элемента: кнопка 'Войти' окна авторизации через 'OK.ru'","time":{"start":1696381867206,"stop":1696381867216,"duration":10},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false}],"attachments":[{"uid":"578cdd5055317496","name":"Screenshot","source":"578cdd5055317496.png","type":"image/png","size":38541},{"uid":"2762b859e60662b6","name":"HTML source","source":"2762b859e60662b6.html","type":"text/html","size":402796}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":4,"attachmentsCount":2,"hasContent":true},"afterStages":[{"name":"setup::0","time":{"start":1696381882607,"stop":1696381882607,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"driver::0","time":{"start":1696381882608,"stop":1696381882671,"duration":63},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false}],"labels":[{"name":"epic","value":"Sign In Page"},{"name":"tag","value":"smoke_test"},{"name":"tag","value":"@pytest.mark.xfail(reason='хранение логинов/паролей не реализовано')"},{"name":"parentSuite","value":"tests.test_sign_in"},{"name":"suite","value":"test_sign_in_page"},{"name":"subSuite","value":"TestSignInPage"},{"name":"host","value":"3fc59d2b2c2e"},{"name":"thread","value":"1-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_sign_in.test_sign_in_page"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"history":{"statistic":{"failed":0,"broken":7,"skipped":80,"passed":0,"unknown":0,"total":87},"items":[{"uid":"8b12e5c673a257ab","reportUrl":"https://Nat754.github.io/StroyremAutomation/83//#testresult/8b12e5c673a257ab","status":"skipped","statusDetails":"XFAIL хранение логинов/паролей не реализовано\n\nselenium.common.exceptions.TimeoutException: Message:","time":{"start":1696295387120,"stop":1696295406190,"duration":19070}},{"uid":"9324f00a49fed0ef","reportUrl":"https://Nat754.github.io/StroyremAutomation/82//#testresult/9324f00a49fed0ef","status":"skipped","statusDetails":"XFAIL хранение логинов/паролей не реализовано\n\nselenium.common.exceptions.TimeoutException: Message:","time":{"start":1696283428354,"stop":1696283448459,"duration":20105}},{"uid":"2a57476329ea2e39","reportUrl":"https://Nat754.github.io/StroyremAutomation/81//#testresult/2a57476329ea2e39","status":"skipped","statusDetails":"XFAIL хранение логинов/паролей не реализовано\n\nselenium.common.exceptions.TimeoutException: Message:","time":{"start":1696259015168,"stop":1696259034534,"duration":19366}},{"uid":"dec2ec88d24ad3c8","reportUrl":"https://Nat754.github.io/StroyremAutomation/81//#testresult/dec2ec88d24ad3c8","status":"skipped","statusDetails":"XFAIL хранение логинов/паролей не реализовано\n\nselenium.common.exceptions.TimeoutException: Message:","time":{"start":1696209022616,"stop":1696209041142,"duration":18526}},{"uid":"8e6fa6618a4e8d83","reportUrl":"https://Nat754.github.io/StroyremAutomation/80//#testresult/8e6fa6618a4e8d83","status":"skipped","statusDetails":"XFAIL хранение логинов/паролей не реализовано\n\nselenium.common.exceptions.TimeoutException: Message:","time":{"start":1696123039716,"stop":1696123059819,"duration":20103}},{"uid":"3338840480b59117","reportUrl":"https://Nat754.github.io/StroyremAutomation/79//#testresult/3338840480b59117","status":"skipped","statusDetails":"XFAIL хранение логинов/паролей не реализовано\n\nselenium.common.exceptions.TimeoutException: Message:","time":{"start":1696035964821,"stop":1696035983237,"duration":18416}},{"uid":"bdd3ab28e62929e2","reportUrl":"https://Nat754.github.io/StroyremAutomation/78//#testresult/bdd3ab28e62929e2","status":"skipped","statusDetails":"XFAIL хранение логинов/паролей не реализовано\n\nselenium.common.exceptions.TimeoutException: Message:","time":{"start":1695949688051,"stop":1695949707609,"duration":19558}},{"uid":"5f9da4d9cf7801e","reportUrl":"https://Nat754.github.io/StroyremAutomation/77//#testresult/5f9da4d9cf7801e","status":"skipped","statusDetails":"XFAIL хранение логинов/паролей не реализовано\n\nselenium.common.exceptions.TimeoutException: Message:","time":{"start":1695863659188,"stop":1695863679727,"duration":20539}},{"uid":"6e635518c608fb9e","reportUrl":"https://Nat754.github.io/StroyremAutomation/76//#testresult/6e635518c608fb9e","status":"skipped","statusDetails":"XFAIL хранение логинов/паролей не реализовано\n\nselenium.common.exceptions.TimeoutException: Message:","time":{"start":1695777491027,"stop":1695777511128,"duration":20101}},{"uid":"5f0851cf8f2244f4","reportUrl":"https://Nat754.github.io/StroyremAutomation/75//#testresult/5f0851cf8f2244f4","status":"skipped","statusDetails":"XFAIL хранение логинов/паролей не реализовано\n\nselenium.common.exceptions.WebDriverException: Message: unknown error: net::ERR_CONNECTION_REFUSED\n  (Session info: headless chrome=117.0.5938.92)\nStacktrace:\n#0 0x55abc2a496b3 <unknown>\n#1 0x55abc271f1e7 <unknown>\n#2 0x55abc27172f3 <unknown>\n#3 0x55abc2707d17 <unknown>\n#4 0x55abc2709191 <unknown>\n#5 0x55abc2708053 <unknown>\n#6 0x55abc270706c <unknown>\n#7 0x55abc2706fde <unknown>\n#8 0x55abc2705be4 <unknown>\n#9 0x55abc270606a <unknown>\n#10 0x55abc27218ce <unknown>\n#11 0x55abc27a1ad5 <unknown>\n#12 0x55abc27880c2 <unknown>\n#13 0x55abc27a1322 <unknown>\n#14 0x55abc2787e93 <unknown>\n#15 0x55abc275a934 <unknown>\n#16 0x55abc275b71e <unknown>\n#17 0x55abc2a0ecb8 <unknown>\n#18 0x55abc2a12bf0 <unknown>\n#19 0x55abc2a1d19c <unknown>\n#20 0x55abc2a13808 <unknown>\n#21 0x55abc29e027f <unknown>\n#22 0x55abc2a37e88 <unknown>\n#23 0x55abc2a38059 <unknown>\n#24 0x55abc2a48843 <unknown>\n#25 0x7fd345f46044 <unknown>","time":{"start":1695690842996,"stop":1695690842996,"duration":0}},{"uid":"5206a1659cb91637","reportUrl":"https://Nat754.github.io/StroyremAutomation/74//#testresult/5206a1659cb91637","status":"skipped","statusDetails":"XFAIL хранение логинов/паролей не реализовано\n\nselenium.common.exceptions.TimeoutException: Message:","time":{"start":1695604506126,"stop":1695604525911,"duration":19785}},{"uid":"cd7f7fbcb3ae7cf9","reportUrl":"https://Nat754.github.io/StroyremAutomation/73//#testresult/cd7f7fbcb3ae7cf9","status":"skipped","statusDetails":"XFAIL хранение логинов/паролей не реализовано\n\nselenium.common.exceptions.TimeoutException: Message:","time":{"start":1695517816568,"stop":1695517836247,"duration":19679}},{"uid":"bfb17d993dee6a33","reportUrl":"https://Nat754.github.io/StroyremAutomation/72//#testresult/bfb17d993dee6a33","status":"skipped","statusDetails":"XFAIL хранение логинов/паролей не реализовано\n\nselenium.common.exceptions.TimeoutException: Message:","time":{"start":1695431579261,"stop":1695431599186,"duration":19925}},{"uid":"e63bcb470277d5df","reportUrl":"https://Nat754.github.io/StroyremAutomation/71//#testresult/e63bcb470277d5df","status":"skipped","statusDetails":"XFAIL хранение логинов/паролей не реализовано\n\nselenium.common.exceptions.TimeoutException: Message:","time":{"start":1695406880327,"stop":1695406900483,"duration":20156}},{"uid":"53908e027bbdbe48","reportUrl":"https://Nat754.github.io/StroyremAutomation/71//#testresult/53908e027bbdbe48","status":"skipped","statusDetails":"XFAIL хранение логинов/паролей не реализовано\n\nselenium.common.exceptions.TimeoutException: Message:","time":{"start":1695344907907,"stop":1695344927103,"duration":19196}},{"uid":"306e75a36d826717","reportUrl":"https://Nat754.github.io/StroyremAutomation/70//#testresult/306e75a36d826717","status":"skipped","statusDetails":"XFAIL хранение логинов/паролей не реализовано\n\nselenium.common.exceptions.TimeoutException: Message:","time":{"start":1695258492713,"stop":1695258511636,"duration":18923}},{"uid":"3419905506886615","reportUrl":"https://Nat754.github.io/StroyremAutomation/69//#testresult/3419905506886615","status":"skipped","statusDetails":"XFAIL хранение логинов/паролей не реализовано\n\nselenium.common.exceptions.TimeoutException: Message:","time":{"start":1695172661886,"stop":1695172682234,"duration":20348}},{"uid":"b0ec37dd76e207e8","reportUrl":"https://Nat754.github.io/StroyremAutomation/68//#testresult/b0ec37dd76e207e8","status":"skipped","statusDetails":"XFAIL хранение логинов/паролей не реализовано\n\nselenium.common.exceptions.TimeoutException: Message:","time":{"start":1695085895048,"stop":1695085914961,"duration":19913}},{"uid":"221147a85243cd5a","reportUrl":"https://Nat754.github.io/StroyremAutomation/67//#testresult/221147a85243cd5a","status":"skipped","statusDetails":"XFAIL хранение логинов/паролей не реализовано\n\nselenium.common.exceptions.TimeoutException: Message:","time":{"start":1695064489833,"stop":1695064509930,"duration":20097}},{"uid":"54646df31a8b3d1f","reportUrl":"https://Nat754.github.io/StroyremAutomation/66//#testresult/54646df31a8b3d1f","status":"skipped","statusDetails":"XFAIL хранение логинов/паролей не реализовано\n\nselenium.common.exceptions.TimeoutException: Message:","time":{"start":1695061075538,"stop":1695061094658,"duration":19120}}]},"tags":["@pytest.mark.xfail(reason='хранение логинов/паролей не реализовано')","smoke_test"]},"source":"89c4d47e832c25d0.json","parameterValues":[]}