{"uid":"1b7ec22c7e81b828","name":"positive_discount_for_unauthorized_customer_purchase_amount_15000_and_above_smoke","fullName":"tests.test_products_on_sale.test_products_on_sale_page.TestProductsOnSalePage#test_positive_discount_for_unauthorized_customer_purchase_amount_15000_and_above_smoke","historyId":"4f69994eb6a10d22432942f97196d2da","time":{"start":1693357614016,"stop":1693357623687,"duration":9671},"status":"skipped","statusMessage":"XFAIL Ждем исправление бага - Разная цена товара в каталоге и на карточке товара\n\nAssertionError: ОР: Суммы равны, ФР: Cтоимость товара в каталоге: 980124.0 в корзине: 931117.86 и со скидкой:931117.86\nassert 931117.86 == (980124.0 - 49006.2)\n +  where 49006.2 = round((980124.0 * 0.05), 2)","statusTrace":"self = <test_products_on_sale_page.TestProductsOnSalePage object at 0x7f096e5de210>\nlink = 'https://test2.stroyrem-nn.ru/catalog/rastvoronasosy'\nproduct_page_open = <pages.products_on_sale_page.ProductsOnSale object at 0x7f096e9026d0>\n\n    @allure.title(\"positive_discount_for_unauthorized_customer_purchase_amount_15000_and_above_smoke\")\n    @pytest.mark.parametrize('link', [f\"{MAIN_PAGE_PROD_URL}{RASTVORONASOSY_PAGE_URL}\",\n                                      f\"{MAIN_PAGE_STAGE_URL}{RASTVORONASOSY_PAGE_URL}\"])\n    @pytest.mark.xfail(reason=\"Ждем исправление бага - Разная цена товара в каталоге и на карточке товара\")\n    @pytest.mark.smoke_test\n    def test_positive_discount_for_unauthorized_customer_purchase_amount_15000_and_above_smoke(\n            self, link, product_page_open):\n        product_page_open.get_field_price_first().send_keys(15000)\n        product_page_open.get_field_price_last().click()\n        time.sleep(5)\n        price = (float(product_page_open.get_pc_price().text[:-2].replace(' ', '')))\n        product_page_open.get_add_to_cart_btn().click()\n        product_page_open.get_header_cart_link_active().click()\n        total = (float(product_page_open.get_total_current_price().text[:-2].replace(' ', '')))\n        cart_total = (float(product_page_open.get_cart_total().text[:-2].replace(' ', '')))\n        discount = float(product_page_open.get_cart_discount().text[:-2].replace(' ', ''))\n>       assert total == price - round(price * 0.05, 2) == cart_total, \\\n            f\"ОР: Суммы равны, ФР: Cтоимость товара в каталоге: {price} в корзине: {cart_total} и со скидкой:{total}\"\nE       AssertionError: ОР: Суммы равны, ФР: Cтоимость товара в каталоге: 980124.0 в корзине: 931117.86 и со скидкой:931117.86\nE       assert 931117.86 == (980124.0 - 49006.2)\nE        +  where 49006.2 = round((980124.0 * 0.05), 2)\n\ntests/test_products_on_sale/test_products_on_sale_page.py:309: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"_session_faker","time":{"start":1693356410617,"stop":1693356410730,"duration":113},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"clear_allure_results_folder","time":{"start":1693356410731,"stop":1693356410731,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"driver","time":{"start":1693357606257,"stop":1693357607108,"duration":851},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"setup","time":{"start":1693357607108,"stop":1693357607109,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"product_page_open","time":{"start":1693357607109,"stop":1693357614015,"duration":6906},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false}],"testStage":{"status":"skipped","statusMessage":"XFAIL Ждем исправление бага - Разная цена товара в каталоге и на карточке товара\n\nAssertionError: ОР: Суммы равны, ФР: Cтоимость товара в каталоге: 980124.0 в корзине: 931117.86 и со скидкой:931117.86\nassert 931117.86 == (980124.0 - 49006.2)\n +  where 49006.2 = round((980124.0 * 0.05), 2)","statusTrace":"self = <test_products_on_sale_page.TestProductsOnSalePage object at 0x7f096e5de210>\nlink = 'https://test2.stroyrem-nn.ru/catalog/rastvoronasosy'\nproduct_page_open = <pages.products_on_sale_page.ProductsOnSale object at 0x7f096e9026d0>\n\n    @allure.title(\"positive_discount_for_unauthorized_customer_purchase_amount_15000_and_above_smoke\")\n    @pytest.mark.parametrize('link', [f\"{MAIN_PAGE_PROD_URL}{RASTVORONASOSY_PAGE_URL}\",\n                                      f\"{MAIN_PAGE_STAGE_URL}{RASTVORONASOSY_PAGE_URL}\"])\n    @pytest.mark.xfail(reason=\"Ждем исправление бага - Разная цена товара в каталоге и на карточке товара\")\n    @pytest.mark.smoke_test\n    def test_positive_discount_for_unauthorized_customer_purchase_amount_15000_and_above_smoke(\n            self, link, product_page_open):\n        product_page_open.get_field_price_first().send_keys(15000)\n        product_page_open.get_field_price_last().click()\n        time.sleep(5)\n        price = (float(product_page_open.get_pc_price().text[:-2].replace(' ', '')))\n        product_page_open.get_add_to_cart_btn().click()\n        product_page_open.get_header_cart_link_active().click()\n        total = (float(product_page_open.get_total_current_price().text[:-2].replace(' ', '')))\n        cart_total = (float(product_page_open.get_cart_total().text[:-2].replace(' ', '')))\n        discount = float(product_page_open.get_cart_discount().text[:-2].replace(' ', ''))\n>       assert total == price - round(price * 0.05, 2) == cart_total, \\\n            f\"ОР: Суммы равны, ФР: Cтоимость товара в каталоге: {price} в корзине: {cart_total} и со скидкой:{total}\"\nE       AssertionError: ОР: Суммы равны, ФР: Cтоимость товара в каталоге: 980124.0 в корзине: 931117.86 и со скидкой:931117.86\nE       assert 931117.86 == (980124.0 - 49006.2)\nE        +  where 49006.2 = round((980124.0 * 0.05), 2)\n\ntests/test_products_on_sale/test_products_on_sale_page.py:309: AssertionError","steps":[{"name":"Проверяем видимость поля 'ЦЕНА от'","time":{"start":1693357614016,"stop":1693357614094,"duration":78},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"Проверяем видимость поля 'ЦЕНА до'","time":{"start":1693357614206,"stop":1693357614256,"duration":50},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"Проверяем видимость цены товара","time":{"start":1693357619322,"stop":1693357619405,"duration":83},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"Проверяем кликабельность кнопки 'В корзину'","time":{"start":1693357619435,"stop":1693357619541,"duration":106},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"Проверяем кликабельность кнопки 'Корзина'","time":{"start":1693357619594,"stop":1693357619954,"duration":360},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"Проверяем видимость суммы Товара в корзине ","time":{"start":1693357623357,"stop":1693357623588,"duration":231},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"Проверяем видимость значения поля 'Товары на сумму'","time":{"start":1693357623631,"stop":1693357623644,"duration":13},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"Проверяем видимость значения поля 'Скидка за объём'","time":{"start":1693357623659,"stop":1693357623674,"duration":15},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false}],"attachments":[{"uid":"26dfdeb540c0e769","name":"Screenshot","source":"26dfdeb540c0e769.png","type":"image/png","size":85365},{"uid":"fd626f749d006702","name":"HTML source","source":"fd626f749d006702.html","type":"text/html","size":497881}],"parameters":[],"stepsCount":8,"attachmentsCount":2,"shouldDisplayMessage":true,"hasContent":true},"afterStages":[{"name":"setup::0","time":{"start":1693357623902,"stop":1693357623902,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"driver::0","time":{"start":1693357623903,"stop":1693357623971,"duration":68},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false}],"labels":[{"name":"epic","value":"Products On SalePage"},{"name":"tag","value":"smoke_test"},{"name":"tag","value":"@pytest.mark.xfail(reason='Ждем исправление бага - Разная цена товара в каталоге и на карточке товара')"},{"name":"parentSuite","value":"tests.test_products_on_sale"},{"name":"suite","value":"test_products_on_sale_page"},{"name":"subSuite","value":"TestProductsOnSalePage"},{"name":"host","value":"060c80b32ef8"},{"name":"thread","value":"1-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_products_on_sale.test_products_on_sale_page"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"link","value":"'https://test2.stroyrem-nn.ru/catalog/rastvoronasosy'"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"history":{"statistic":{"failed":0,"broken":0,"skipped":12,"passed":0,"unknown":0,"total":12},"items":[{"uid":"c566b682c5e3cdfe","reportUrl":"https://Nat754.github.io/StroyremAutomation/42//#testresult/c566b682c5e3cdfe","status":"skipped","statusDetails":"XFAIL Ждем исправление бага - Разная цена товара в каталоге и на карточке товара\n\nAssertionError: ОР: Суммы равны, ФР: Cтоимость товара в каталоге: 980124.0 в корзине: 931117.86 и со скидкой:931117.86\nassert 931117.86 == (980124.0 - 49006.2)\n +  where 49006.2 = round((980124.0 * 0.05), 2)","time":{"start":1693300427484,"stop":1693300435416,"duration":7932}},{"uid":"e248e867b1bfe535","reportUrl":"https://Nat754.github.io/StroyremAutomation/41//#testresult/e248e867b1bfe535","status":"skipped","statusDetails":"XFAIL Ждем исправление бага - Разная цена товара в каталоге и на карточке товара\n\nAssertionError: ОР: Суммы равны, ФР: Cтоимость товара в каталоге: 980124.0 в корзине: 931117.86 и со скидкой:931117.86\nassert 931117.86 == (980124.0 - 49006.2)\n +  where 49006.2 = round((980124.0 * 0.05), 2)","time":{"start":1693298604174,"stop":1693298612494,"duration":8320}},{"uid":"736a6085f5046e60","reportUrl":"https://Nat754.github.io/StroyremAutomation/41//#testresult/736a6085f5046e60","status":"skipped","statusDetails":"XFAIL Ждем исправление бага - Разная цена товара в каталоге и на карточке товара\n\nAssertionError: ОР: Суммы равны, ФР: Cтоимость товара в каталоге: 980124.0 в корзине: 931117.86 и со скидкой:931117.86\nassert 931117.86 == (980124.0 - 49006.2)\n +  where 49006.2 = round((980124.0 * 0.05), 2)","time":{"start":1693270864325,"stop":1693270872705,"duration":8380}},{"uid":"a5f5954532164381","reportUrl":"https://Nat754.github.io/StroyremAutomation/40//#testresult/a5f5954532164381","status":"skipped","statusDetails":"XFAIL Ждем исправление бага - Разная цена товара в каталоге и на карточке товара\n\nAssertionError: ОР: Суммы равны, ФР: Cтоимость товара в каталоге: 980124.0 в корзине: 931117.86 и со скидкой:931117.86\nassert 931117.86 == (980124.0 - 49006.2)\n +  where 49006.2 = round((980124.0 * 0.05), 2)","time":{"start":1693244085333,"stop":1693244094988,"duration":9655}},{"uid":"cf2abad157b5b413","reportUrl":"https://Nat754.github.io/StroyremAutomation/40//#testresult/cf2abad157b5b413","status":"skipped","statusDetails":"XFAIL Ждем исправление бага - Разная цена товара в каталоге и на карточке товара\n\nselenium.common.exceptions.TimeoutException: Message: \nStacktrace:\n#0 0x5648a84f1e23 <unknown>\n#1 0x5648a821a7a7 <unknown>\n#2 0x5648a82591d3 <unknown>\n#3 0x5648a82592c1 <unknown>\n#4 0x5648a8294a04 <unknown>\n#5 0x5648a827a03d <unknown>\n#6 0x5648a8292369 <unknown>\n#7 0x5648a8279de3 <unknown>\n#8 0x5648a824da7b <unknown>\n#9 0x5648a824e81e <unknown>\n#10 0x5648a84b3638 <unknown>\n#11 0x5648a84b7507 <unknown>\n#12 0x5648a84c1c4c <unknown>\n#13 0x5648a84b8136 <unknown>\n#14 0x5648a84869cf <unknown>\n#15 0x5648a84dbb98 <unknown>\n#16 0x5648a84dbd68 <unknown>\n#17 0x5648a84eacb3 <unknown>\n#18 0x7f8784ff2044 <unknown>","time":{"start":1693184551761,"stop":1693184566937,"duration":15176}},{"uid":"60de9bdc3f842503","reportUrl":"https://Nat754.github.io/StroyremAutomation/39//#testresult/60de9bdc3f842503","status":"skipped","statusDetails":"XFAIL Ждем исправление бага - Разная цена товара в каталоге и на карточке товара\n\nselenium.common.exceptions.TimeoutException: Message: \nStacktrace:\n#0 0x5646f93b7e23 <unknown>\n#1 0x5646f90e07a7 <unknown>\n#2 0x5646f911f1d3 <unknown>\n#3 0x5646f911f2c1 <unknown>\n#4 0x5646f915aa04 <unknown>\n#5 0x5646f914003d <unknown>\n#6 0x5646f9158369 <unknown>\n#7 0x5646f913fde3 <unknown>\n#8 0x5646f9113a7b <unknown>\n#9 0x5646f911481e <unknown>\n#10 0x5646f9379638 <unknown>\n#11 0x5646f937d507 <unknown>\n#12 0x5646f9387c4c <unknown>\n#13 0x5646f937e136 <unknown>\n#14 0x5646f934c9cf <unknown>\n#15 0x5646f93a1b98 <unknown>\n#16 0x5646f93a1d68 <unknown>\n#17 0x5646f93b0cb3 <unknown>\n#18 0x7fc4bcd7d044 <unknown>","time":{"start":1693170654468,"stop":1693170669640,"duration":15172}},{"uid":"bbbd32ce13fdf62f","reportUrl":"https://Nat754.github.io/StroyremAutomation/39//#testresult/bbbd32ce13fdf62f","status":"skipped","statusDetails":"XFAIL Ждем исправление бага - Разная цена товара в каталоге и на карточке товара\n\nselenium.common.exceptions.TimeoutException: Message: \nStacktrace:\n#0 0x565310c98e23 <unknown>\n#1 0x5653109c17a7 <unknown>\n#2 0x565310a001d3 <unknown>\n#3 0x565310a002c1 <unknown>\n#4 0x565310a3ba04 <unknown>\n#5 0x565310a2103d <unknown>\n#6 0x565310a39369 <unknown>\n#7 0x565310a20de3 <unknown>\n#8 0x5653109f4a7b <unknown>\n#9 0x5653109f581e <unknown>\n#10 0x565310c5a638 <unknown>\n#11 0x565310c5e507 <unknown>\n#12 0x565310c68c4c <unknown>\n#13 0x565310c5f136 <unknown>\n#14 0x565310c2d9cf <unknown>\n#15 0x565310c82b98 <unknown>\n#16 0x565310c82d68 <unknown>\n#17 0x565310c91cb3 <unknown>\n#18 0x7f7548b28044 <unknown>","time":{"start":1693140774089,"stop":1693140789371,"duration":15282}},{"uid":"8e35b4cc913b3e0f","reportUrl":"https://Nat754.github.io/StroyremAutomation/39//#testresult/8e35b4cc913b3e0f","status":"skipped","statusDetails":"XFAIL Ждем исправление бага - Разная цена товара в каталоге и на карточке товара\n\nselenium.common.exceptions.TimeoutException: Message: \nStacktrace:\n#0 0x55a06b718e23 <unknown>\n#1 0x55a06b4417a7 <unknown>\n#2 0x55a06b4801d3 <unknown>\n#3 0x55a06b4802c1 <unknown>\n#4 0x55a06b4bba04 <unknown>\n#5 0x55a06b4a103d <unknown>\n#6 0x55a06b4b9369 <unknown>\n#7 0x55a06b4a0de3 <unknown>\n#8 0x55a06b474a7b <unknown>\n#9 0x55a06b47581e <unknown>\n#10 0x55a06b6da638 <unknown>\n#11 0x55a06b6de507 <unknown>\n#12 0x55a06b6e8c4c <unknown>\n#13 0x55a06b6df136 <unknown>\n#14 0x55a06b6ad9cf <unknown>\n#15 0x55a06b702b98 <unknown>\n#16 0x55a06b702d68 <unknown>\n#17 0x55a06b711cb3 <unknown>\n#18 0x7f28d73ad044 <unknown>","time":{"start":1693098217619,"stop":1693098232650,"duration":15031}},{"uid":"892ea606035c36d2","reportUrl":"https://Nat754.github.io/StroyremAutomation/38//#testresult/892ea606035c36d2","status":"skipped","statusDetails":"XFAIL Ждем исправление бага - Разная цена товара в каталоге и на карточке товара\n\nAssertionError: ОР: Суммы равны, ФР: Cтоимость товара в каталоге: 980124.0 в корзине: 931117.86 и со скидкой:931117.86\nassert 931117.86 == (980124.0 - 49006.2)\n +  where 49006.2 = round((980124.0 * 0.05), 2)","time":{"start":1693032015949,"stop":1693032024162,"duration":8213}},{"uid":"db1e38c7714ca725","reportUrl":"https://Nat754.github.io/StroyremAutomation/38//#testresult/db1e38c7714ca725","status":"skipped","statusDetails":"XFAIL Ждем исправление бага - Разная цена товара в каталоге и на карточке товара\n\nAssertionError: ОР: Суммы равны, ФР: Cтоимость товара в каталоге: 980124.0 в корзине: 931117.86 и со скидкой:931117.86\nassert 931117.86 == (980124.0 - 49006.2)\n +  where 49006.2 = round((980124.0 * 0.05), 2)","time":{"start":1693011738624,"stop":1693011747724,"duration":9100}},{"uid":"7c478a8b665172d7","reportUrl":"https://Nat754.github.io/StroyremAutomation/37//#testresult/7c478a8b665172d7","status":"skipped","statusDetails":"XFAIL Ждем исправление бага - Разная цена товара в каталоге и на карточке товара\n\nAssertionError: ОР: Суммы равны, ФР: Cтоимость товара в каталоге: 980124.0 в корзине: 931117.86\nassert 931117.86 == (980124.0 - 49006.2)\n +  where 49006.2 = round((980124.0 * 0.05), 2)","time":{"start":1692967238444,"stop":1692967247909,"duration":9465}}]},"tags":["smoke_test","@pytest.mark.xfail(reason='Ждем исправление бага - Разная цена товара в каталоге и на карточке товара')"]},"source":"1b7ec22c7e81b828.json","parameterValues":["'https://test2.stroyrem-nn.ru/catalog/rastvoronasosy'"]}