{"uid":"2ffad4cc3be8f144","name":"positive_check_discount_displayed_for_unauthorized_customer_for_amount_7500_9999rub_smoke","fullName":"tests.test_products_on_sale.test_products_on_sale_page.TestProductsOnSalePage#test_positive_check_there_is_no_discount_for_unauthorized_customer_on_order_page_for_red_prices_smoke","historyId":"56dc95032881057b0b8ffab5dc914f14","time":{"start":1717722733368,"stop":1717722764348,"duration":30980},"status":"broken","statusMessage":"selenium.common.exceptions.TimeoutException: Message:","statusTrace":"self = <tests.test_products_on_sale.test_products_on_sale_page.TestProductsOnSalePage object at 0x7f8c0d9d0090>\nlink = 'https://stroyrem-nn.ru/catalog/action'\nproduct_page_open = <pages.products_on_sale_page.ProductsOnSale object at 0x7f8c0d2fc250>\n\n    @allure.title(\"positive_check_discount_displayed_for_unauthorized_customer_for_amount_7500_9999rub_smoke\")\n    @pytest.mark.parametrize('link', [f\"{MAIN_PAGE_PROD_URL}{ACTION_PAGE_URL}\",\n                                      f\"{MAIN_PAGE_STAGE_URL}{ACTION_PAGE_URL}\"])\n    @pytest.mark.smoke_test\n    def test_positive_check_there_is_no_discount_for_unauthorized_customer_on_order_page_for_red_prices_smoke(\n            self, link, product_page_open):\n        product_page_open.get_in_stock_products_link().click()\n        time.sleep(1)\n        product_page_open.get_text_red_link().click()\n        time.sleep(5)\n        product_page_open.get_add_to_cart_btn().click()\n        price = (float(product_page_open.get_pc_price().text[:-2].replace(' ', '')))\n        product_page_open.get_header_cart_link_active().click()\n        product_page_open.get_show_modal().click()\n        product_page_open.get_name().send_keys(USER_NAME)\n        product_page_open.get_phone().send_keys(USER_PHONE)\n        product_page_open.get_email().send_keys(USER_EMAIL)\n        product_page_open.get_checkout_to_step_2().click()\n>       total = (float(product_page_open.get_products_total().text[:-2].replace(' ', '')))\n\ntests/test_products_on_sale/test_products_on_sale_page.py:205: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \npages/products_on_sale_page.py:90: in get_products_total\n    return self.element_is_visible(self._products_total)\nbase/seleniumbase.py:34: in element_is_visible\n    return self.__wait.until(EC.visibility_of_element_located(locator))\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <selenium.webdriver.support.wait.WebDriverWait (session=\"513ea965fc28a862ee3c78c7dd5b970f\")>\nmethod = <function visibility_of_element_located.<locals>._predicate at 0x7f8c0e53bce0>\nmessage = ''\n\n    def until(self, method, message: str = \"\"):\n        \"\"\"Calls the method provided with the driver as an argument until the \\\n        return value does not evaluate to ``False``.\n    \n        :param method: callable(WebDriver)\n        :param message: optional message for :exc:`TimeoutException`\n        :returns: the result of the last call to `method`\n        :raises: :exc:`selenium.common.exceptions.TimeoutException` if timeout occurs\n        \"\"\"\n        screen = None\n        stacktrace = None\n    \n        end_time = time.monotonic() + self._timeout\n        while True:\n            try:\n                value = method(self._driver)\n                if value:\n                    return value\n            except self._ignored_exceptions as exc:\n                screen = getattr(exc, \"screen\", None)\n                stacktrace = getattr(exc, \"stacktrace\", None)\n            time.sleep(self._poll)\n            if time.monotonic() > end_time:\n                break\n>       raise TimeoutException(message, screen, stacktrace)\nE       selenium.common.exceptions.TimeoutException: Message:\n\n/usr/local/lib/python3.11/site-packages/selenium/webdriver/support/wait.py:95: TimeoutException","flaky":false,"newFailed":false,"newBroken":true,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"_session_faker","time":{"start":1717721729716,"stop":1717721729782,"duration":66},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"clear_allure_results_folder","time":{"start":1717721729782,"stop":1717721729782,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"driver","time":{"start":1717722724364,"stop":1717722725052,"duration":688},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup","time":{"start":1717722725052,"stop":1717722725052,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"product_page_open","time":{"start":1717722725052,"stop":1717722733368,"duration":8316},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"status":"broken","statusMessage":"selenium.common.exceptions.TimeoutException: Message:","statusTrace":"self = <tests.test_products_on_sale.test_products_on_sale_page.TestProductsOnSalePage object at 0x7f8c0d9d0090>\nlink = 'https://stroyrem-nn.ru/catalog/action'\nproduct_page_open = <pages.products_on_sale_page.ProductsOnSale object at 0x7f8c0d2fc250>\n\n    @allure.title(\"positive_check_discount_displayed_for_unauthorized_customer_for_amount_7500_9999rub_smoke\")\n    @pytest.mark.parametrize('link', [f\"{MAIN_PAGE_PROD_URL}{ACTION_PAGE_URL}\",\n                                      f\"{MAIN_PAGE_STAGE_URL}{ACTION_PAGE_URL}\"])\n    @pytest.mark.smoke_test\n    def test_positive_check_there_is_no_discount_for_unauthorized_customer_on_order_page_for_red_prices_smoke(\n            self, link, product_page_open):\n        product_page_open.get_in_stock_products_link().click()\n        time.sleep(1)\n        product_page_open.get_text_red_link().click()\n        time.sleep(5)\n        product_page_open.get_add_to_cart_btn().click()\n        price = (float(product_page_open.get_pc_price().text[:-2].replace(' ', '')))\n        product_page_open.get_header_cart_link_active().click()\n        product_page_open.get_show_modal().click()\n        product_page_open.get_name().send_keys(USER_NAME)\n        product_page_open.get_phone().send_keys(USER_PHONE)\n        product_page_open.get_email().send_keys(USER_EMAIL)\n        product_page_open.get_checkout_to_step_2().click()\n>       total = (float(product_page_open.get_products_total().text[:-2].replace(' ', '')))\n\ntests/test_products_on_sale/test_products_on_sale_page.py:205: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \npages/products_on_sale_page.py:90: in get_products_total\n    return self.element_is_visible(self._products_total)\nbase/seleniumbase.py:34: in element_is_visible\n    return self.__wait.until(EC.visibility_of_element_located(locator))\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <selenium.webdriver.support.wait.WebDriverWait (session=\"513ea965fc28a862ee3c78c7dd5b970f\")>\nmethod = <function visibility_of_element_located.<locals>._predicate at 0x7f8c0e53bce0>\nmessage = ''\n\n    def until(self, method, message: str = \"\"):\n        \"\"\"Calls the method provided with the driver as an argument until the \\\n        return value does not evaluate to ``False``.\n    \n        :param method: callable(WebDriver)\n        :param message: optional message for :exc:`TimeoutException`\n        :returns: the result of the last call to `method`\n        :raises: :exc:`selenium.common.exceptions.TimeoutException` if timeout occurs\n        \"\"\"\n        screen = None\n        stacktrace = None\n    \n        end_time = time.monotonic() + self._timeout\n        while True:\n            try:\n                value = method(self._driver)\n                if value:\n                    return value\n            except self._ignored_exceptions as exc:\n                screen = getattr(exc, \"screen\", None)\n                stacktrace = getattr(exc, \"stacktrace\", None)\n            time.sleep(self._poll)\n            if time.monotonic() > end_time:\n                break\n>       raise TimeoutException(message, screen, stacktrace)\nE       selenium.common.exceptions.TimeoutException: Message:\n\n/usr/local/lib/python3.11/site-packages/selenium/webdriver/support/wait.py:95: TimeoutException","steps":[{"name":"Проверяем кликабельность кнопки 'На складе'","time":{"start":1717722733368,"stop":1717722733421,"duration":53},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Проверяем кликабельность кнопки 'Красная цена!'","time":{"start":1717722734504,"stop":1717722734545,"duration":41},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Проверяем кликабельность кнопки 'В корзину'","time":{"start":1717722740293,"stop":1717722740342,"duration":49},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Проверяем видимость цены товара","time":{"start":1717722740374,"stop":1717722740408,"duration":34},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Проверяем кликабельность кнопки 'Корзина'","time":{"start":1717722740418,"stop":1717722741980,"duration":1562},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Проверяем кликабельность кнопки 'Перейти к оформлению'","time":{"start":1717722748798,"stop":1717722748836,"duration":38},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Проверяем видимость поля 'ФИО'","time":{"start":1717722748875,"stop":1717722748918,"duration":43},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Проверяем видимость поля 'Номер телефона'","time":{"start":1717722748959,"stop":1717722748981,"duration":22},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Проверяем видимость поля 'E-mail'","time":{"start":1717722749062,"stop":1717722749084,"duration":22},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Проверяем видимость кнопки 'Продолжить'","time":{"start":1717722749148,"stop":1717722749182,"duration":34},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Проверяем видимость поля 'Товары на сумму'","time":{"start":1717722749217,"stop":1717722764347,"duration":15130},"status":"broken","statusMessage":"selenium.common.exceptions.TimeoutException: Message: \n\n","statusTrace":"  File \"/usr/local/lib/python3.11/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/app/pages/products_on_sale_page.py\", line 90, in get_products_total\n    return self.element_is_visible(self._products_total)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/base/seleniumbase.py\", line 34, in element_is_visible\n    return self.__wait.until(EC.visibility_of_element_located(locator))\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.11/site-packages/selenium/webdriver/support/wait.py\", line 95, in until\n    raise TimeoutException(message, screen, stacktrace)\n","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"602b556953e2d76f","name":"Screenshot","source":"602b556953e2d76f.png","type":"image/png","size":30356},{"uid":"461dcff0295d4ea0","name":"HTML source","source":"461dcff0295d4ea0.html","type":"text/html","size":528203}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":11,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"setup::0","time":{"start":1717722764456,"stop":1717722764457,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"driver::0","time":{"start":1717722764457,"stop":1717722764536,"duration":79},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"epic","value":"Products On SalePage"},{"name":"tag","value":"smoke_test"},{"name":"tag","value":"flaky(max_runs=3, min_passes=1)"},{"name":"parentSuite","value":"tests.test_products_on_sale"},{"name":"suite","value":"test_products_on_sale_page"},{"name":"subSuite","value":"TestProductsOnSalePage"},{"name":"host","value":"ef9d39a97878"},{"name":"thread","value":"1-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_products_on_sale.test_products_on_sale_page"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"link","value":"'https://stroyrem-nn.ru/catalog/action'"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":0,"broken":3,"skipped":0,"passed":6,"unknown":0,"total":9},"items":[{"uid":"c4f0f81bae616663","reportUrl":"https://Nat754.github.io/StroyremAutomation/330//#testresult/c4f0f81bae616663","status":"passed","time":{"start":1717636246798,"stop":1717636259890,"duration":13092}},{"uid":"8fcd0304e5c9bcb2","reportUrl":"https://Nat754.github.io/StroyremAutomation/329//#testresult/8fcd0304e5c9bcb2","status":"broken","statusDetails":"selenium.common.exceptions.ElementClickInterceptedException: Message: element click intercepted: Element <label for=\"discounted_products\" class=\"text-red\">...</label> is not clickable at point (265, 18). Other element would receive the click: <div style=\"position:fixed;background:rgba(255,255,255,0.5);z-index:1000;left:0;top:0;width:100%;height:100%;\" class=\"fpreloader\"></div>\n  (Session info: chrome-headless-shell=125.0.6422.141)\nStacktrace:\n#0 0x562894855e3a <unknown>\n#1 0x56289453f45c <unknown>\n#2 0x562894592336 <unknown>\n#3 0x562894590176 <unknown>\n#4 0x56289458db57 <unknown>\n#5 0x56289458c97c <unknown>\n#6 0x5628945800ff <unknown>\n#7 0x5628945ae4b2 <unknown>\n#8 0x56289457fa79 <unknown>\n#9 0x5628945ae67e <unknown>\n#10 0x5628945cd2cc <unknown>\n#11 0x5628945ae253 <unknown>\n#12 0x56289457e1c7 <unknown>\n#13 0x56289457eb3e <unknown>\n#14 0x56289481c27b <unknown>\n#15 0x562894820327 <unknown>\n#16 0x562894808dae <unknown>\n#17 0x562894820df2 <unknown>\n#18 0x5628947ed74f <unknown>\n#19 0x562894845128 <unknown>\n#20 0x5628948452fb <unknown>\n#21 0x562894854f6c <unknown>\n#22 0x7faeea129134 <unknown>","time":{"start":1717550055753,"stop":1717550058038,"duration":2285}},{"uid":"b8c544597eb41697","reportUrl":"https://Nat754.github.io/StroyremAutomation/328//#testresult/b8c544597eb41697","status":"passed","time":{"start":1717463435346,"stop":1717463447664,"duration":12318}},{"uid":"9ad668221eddd2e8","reportUrl":"https://Nat754.github.io/StroyremAutomation/327//#testresult/9ad668221eddd2e8","status":"passed","time":{"start":1717377275914,"stop":1717377288495,"duration":12581}},{"uid":"aeed51d407576304","reportUrl":"https://Nat754.github.io/StroyremAutomation/326//#testresult/aeed51d407576304","status":"passed","time":{"start":1717291004890,"stop":1717291017272,"duration":12382}},{"uid":"8cfd9f45d9cf5d64","reportUrl":"https://Nat754.github.io/StroyremAutomation/325//#testresult/8cfd9f45d9cf5d64","status":"broken","statusDetails":"selenium.common.exceptions.ElementClickInterceptedException: Message: element click intercepted: Element <label for=\"discounted_products\" class=\"text-red\">...</label> is not clickable at point (265, 18). Other element would receive the click: <div style=\"position:fixed;background:rgba(255,255,255,0.5);z-index:1000;left:0;top:0;width:100%;height:100%;\" class=\"fpreloader\"></div>\n  (Session info: chrome-headless-shell=125.0.6422.141)\nStacktrace:\n#0 0x55ae463f5e3a <unknown>\n#1 0x55ae460df45c <unknown>\n#2 0x55ae46132336 <unknown>\n#3 0x55ae46130176 <unknown>\n#4 0x55ae4612db57 <unknown>\n#5 0x55ae4612c97c <unknown>\n#6 0x55ae461200ff <unknown>\n#7 0x55ae4614e4b2 <unknown>\n#8 0x55ae4611fa79 <unknown>\n#9 0x55ae4614e67e <unknown>\n#10 0x55ae4616d2cc <unknown>\n#11 0x55ae4614e253 <unknown>\n#12 0x55ae4611e1c7 <unknown>\n#13 0x55ae4611eb3e <unknown>\n#14 0x55ae463bc27b <unknown>\n#15 0x55ae463c0327 <unknown>\n#16 0x55ae463a8dae <unknown>\n#17 0x55ae463c0df2 <unknown>\n#18 0x55ae4638d74f <unknown>\n#19 0x55ae463e5128 <unknown>\n#20 0x55ae463e52fb <unknown>\n#21 0x55ae463f4f6c <unknown>\n#22 0x7f72cb5f4134 <unknown>","time":{"start":1717204341077,"stop":1717204343334,"duration":2257}},{"uid":"49f731d7780a0a9c","reportUrl":"https://Nat754.github.io/StroyremAutomation/324//#testresult/49f731d7780a0a9c","status":"passed","time":{"start":1717118034548,"stop":1717118047792,"duration":13244}},{"uid":"8d477b6147c61527","reportUrl":"https://Nat754.github.io/StroyremAutomation/323//#testresult/8d477b6147c61527","status":"passed","time":{"start":1717031353700,"stop":1717031368958,"duration":15258}}]},"tags":["smoke_test","flaky(max_runs=3, min_passes=1)"]},"source":"2ffad4cc3be8f144.json","parameterValues":["'https://stroyrem-nn.ru/catalog/action'"]}